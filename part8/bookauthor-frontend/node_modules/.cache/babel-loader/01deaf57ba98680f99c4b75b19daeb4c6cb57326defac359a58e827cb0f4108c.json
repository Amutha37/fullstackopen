{"ast":null,"code":"var _jsxFileName = \"/Users/amuthamuhunthan/FULLSTACK/fullstackopen/part8/bookauthor-frontend/src/components/AddNewBook.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\n\n// state management\nimport { useField } from '../hooks';\nimport { setNotification } from '../reducers/notificationReducer';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { useMutation } from '@apollo/client';\nimport { CREATE_BOOK, ALL_BOOKS } from '../queries';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Button = styled.button`\n  background: Bisque;\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 3px solid Chocolate;\n  border-radius: 3px;\n`;\n_c = Button;\nconst Input = styled.input`\n  margin: 0.25em;\n`;\n_c2 = Input;\nconst TomatoButton = styled(Button)`\n  background: tomato;\n`;\n_c3 = TomatoButton;\nconsole.log('create...CREATE TO');\nconst AddNewBook = () => {\n  _s();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    reset: resetTitle,\n    ...title\n  } = useField('text');\n  const {\n    reset: resetAuthor,\n    ...author\n  } = useField('text');\n  const {\n    reset: resetPublished,\n    ...published\n  } = useField('text');\n  const [genre, setGenre] = useState('');\n  const [genres, setGenres] = useState([]);\n  const [createBook] = useMutation(CREATE_BOOK, {\n    refetchQueries: [{\n      query: ALL_BOOKS\n    }],\n    onError: error => {\n      console.log('error', error);\n      const errors = error.graphQLErrors[0].extensions.error.errors;\n      const messages = Object.values(errors).map(e => e.message).join('\\n');\n      console.log('messageul', messages);\n      dispatch(setNotification(`Error   : ${messages}`, 5));\n    }\n  });\n\n  // dispatch(setNotification(`Error: ${messages}`, 5))\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const newBookDetails = {\n      author: author.value,\n      title: title.value,\n      published: Number(published.value),\n      genres: genres\n    };\n    createBook({\n      variables: newBookDetails\n    });\n    dispatch(setNotification(`Added new book list  : ${newBookDetails.title}`, 5));\n    resetTitle();\n    resetAuthor();\n    resetPublished();\n    setGenres([]);\n    navigate('/books');\n  };\n  const addGenre = () => {\n    setGenres(genres.concat(genre));\n    setGenre('');\n  };\n  const handleReset = e => {\n    e.preventDefault();\n    resetTitle();\n    resetAuthor();\n    resetPublished();\n  };\n  console.log('create...');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Author :\", /*#__PURE__*/_jsxDEV(Input, {\n          label: \"author\",\n          ...author\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Title :\", /*#__PURE__*/_jsxDEV(Input, {\n          label: \"title\",\n          ...title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Published :\", /*#__PURE__*/_jsxDEV(Input, {\n          label: \"published\",\n          ...published\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Genre :\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: genre,\n          onChange: _ref => {\n            let {\n              target\n            } = _ref;\n            return setGenre(target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addGenre,\n          type: \"button\",\n          children: \"add genre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), genres && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Genres: \", genres.join()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        children: \"ADD \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TomatoButton, {\n        onClick: handleReset,\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n_s(AddNewBook, \"XT1IFb2i6lNaG8RD20GJ8TNYx+g=\", false, function () {\n  return [useNavigate, useDispatch, useField, useField, useField, useMutation];\n});\n_c4 = AddNewBook;\nexport default AddNewBook;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Button\");\n$RefreshReg$(_c2, \"Input\");\n$RefreshReg$(_c3, \"TomatoButton\");\n$RefreshReg$(_c4, \"AddNewBook\");","map":{"version":3,"names":["useState","useField","setNotification","useDispatch","useNavigate","styled","useMutation","CREATE_BOOK","ALL_BOOKS","jsxDEV","_jsxDEV","Button","button","_c","Input","input","_c2","TomatoButton","_c3","console","log","AddNewBook","_s","navigate","dispatch","reset","resetTitle","title","resetAuthor","author","resetPublished","published","genre","setGenre","genres","setGenres","createBook","refetchQueries","query","onError","error","errors","graphQLErrors","extensions","messages","Object","values","map","e","message","join","handleSubmit","event","preventDefault","newBookDetails","value","Number","variables","addGenre","concat","handleReset","children","onSubmit","label","fileName","_jsxFileName","lineNumber","columnNumber","onChange","_ref","target","onClick","type","_c4","$RefreshReg$"],"sources":["/Users/amuthamuhunthan/FULLSTACK/fullstackopen/part8/bookauthor-frontend/src/components/AddNewBook.js"],"sourcesContent":["import { useState } from 'react'\n\n// state management\nimport { useField } from '../hooks'\nimport { setNotification } from '../reducers/notificationReducer'\nimport { useDispatch } from 'react-redux'\n\nimport { useNavigate } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { useMutation } from '@apollo/client'\nimport { CREATE_BOOK, ALL_BOOKS } from '../queries'\n\nconst Button = styled.button`\n  background: Bisque;\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 3px solid Chocolate;\n  border-radius: 3px;\n`\n\nconst Input = styled.input`\n  margin: 0.25em;\n`\nconst TomatoButton = styled(Button)`\n  background: tomato;\n`\n\nconsole.log('create...CREATE TO')\n\nconst AddNewBook = () => {\n  const navigate = useNavigate()\n  const dispatch = useDispatch()\n\n  const { reset: resetTitle, ...title } = useField('text')\n  const { reset: resetAuthor, ...author } = useField('text')\n  const { reset: resetPublished, ...published } = useField('text')\n\n  const [genre, setGenre] = useState('')\n  const [genres, setGenres] = useState([])\n\n  const [createBook] = useMutation(CREATE_BOOK, {\n    refetchQueries: [{ query: ALL_BOOKS }],\n\n    onError: (error) => {\n      console.log('error', error)\n      const errors = error.graphQLErrors[0].extensions.error.errors\n      const messages = Object.values(errors)\n        .map((e) => e.message)\n        .join('\\n')\n      console.log('messageul', messages)\n      dispatch(setNotification(`Error   : ${messages}`, 5))\n    },\n  })\n\n  // dispatch(setNotification(`Error: ${messages}`, 5))\n\n  const handleSubmit = async (event) => {\n    event.preventDefault()\n\n    const newBookDetails = {\n      author: author.value,\n      title: title.value,\n      published: Number(published.value),\n      genres: genres,\n    }\n\n    createBook({ variables: newBookDetails })\n\n    dispatch(\n      setNotification(`Added new book list  : ${newBookDetails.title}`, 5)\n    )\n\n    resetTitle()\n    resetAuthor()\n    resetPublished()\n\n    setGenres([])\n    navigate('/books')\n  }\n\n  const addGenre = () => {\n    setGenres(genres.concat(genre))\n    setGenre('')\n  }\n\n  const handleReset = (e) => {\n    e.preventDefault()\n    resetTitle()\n    resetAuthor()\n    resetPublished()\n  }\n\n  console.log('create...')\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <div>\n          Author :\n          <Input label='author' {...author} />\n        </div>\n        <div>\n          Title :\n          <Input label='title' {...title} />\n        </div>\n        <div>\n          Published :\n          <Input label='published' {...published} />\n        </div>\n\n        {/* ADDING genres  */}\n        <div>\n          Genre :\n          <input\n            value={genre}\n            onChange={({ target }) => setGenre(target.value)}\n          />\n          <button onClick={addGenre} type='button'>\n            add genre\n          </button>\n        </div>\n\n        {genres && <div>Genres: {genres.join()}</div>}\n\n        <Button type='submit'>ADD </Button>\n        <TomatoButton onClick={handleReset}>Reset</TomatoButton>\n      </form>\n    </div>\n  )\n}\n\nexport default AddNewBook\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}